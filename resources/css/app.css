@tailwind base;
@tailwind components;
@tailwind utilities;

/* Safe-area + consistent page padding on mobile */
@layer utilities {
  .px-safe {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Tighten DaisyUI stats on very small screens so they never overlap */
@media (max-width: 400px) {
  .stat { padding: 0.5rem !important; }
  .stat .stat-title { font-size: 0.7rem !important; }
  .stat .stat-value { font-size: 1.125rem !important; } /* ~18px */
}

/* Prevent accidental horizontal scroll from wide components */
html, body { overflow-x: hidden; }

/* === Botman fixes (mobile + click-through) === */

/* Keep launcher consistent, anchored bottom-right */
#botmanWidgetRoot .botmanWidget--launcher{
  position: fixed !important;
  right: max(env(safe-area-inset-right), 16px) !important;
  bottom: max(env(safe-area-inset-bottom), 16px) !important;
  width: 64px !important; height: 64px !important;
  border-radius: 9999px !important;
  background: #2563eb !important;
  box-shadow: 0 10px 24px rgba(0,0,0,.25) !important;
  z-index: 2147483000 !important;
}

/* Always show the same envelope icon in the launcher */
#botmanWidgetRoot .botmanWidget--launcher svg { display: none !important; }
#botmanWidgetRoot .botmanWidget--launcher::before{
  content: "";
  display: block;
  width: 28px; height: 28px;
  margin: 18px auto;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  background-image: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'>\
  <path d='M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM4 8l8 5 8-5v10H4V8zm16-2l-8 5-8-5V6h16z'/>\
  </svg>");
}

#webchat {
  display: none !important;
  width: 0 !important; height: 0 !important;
  pointer-events: none !important;
  position: fixed !important;
  right: 16px !important; bottom: 16px !important;
  left: auto !important; top: auto !important;
  z-index: 2147483001 !important;
}

#webchat.opened,
#webchat[style*="display: block"] {
  display: block !important;
  pointer-events: auto !important;
  width: min(420px, 100vw) !important;
  height: 72vh !important;
  max-height: 560px !important;
  right: max(16px, env(safe-area-inset-right)) !important;
  bottom: max(16px, env(safe-area-inset-bottom)) !important;
  left: auto !important; top: auto !important;
  border-radius: 12px 12px 0 0 !important;
  overflow: hidden !important;
  transform: none !important;
}

@media (max-width: 640px){
  #webchat.opened,
  #webchat[style*="display: block"]{
    width: 100vw !important;
    right: 0 !important; left: 0 !important;
    border-radius: 12px 12px 0 0 !important;
  }
}

